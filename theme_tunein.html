<div class="c-podcast-player podcast-player">
    <div class="c-podcast-player__item c-podcast-player__oembed-header podcast-player">
        <img class="c-podcast-player__cover-image" pp-src="coverUrl"  />
        <div class="c-podcast-player__episode-title-wrapper">
            <div class="c-podcast-player__episode-title">
                <a href="https://www.welt.de/podcasts/alles-auf-aktien/" target="_blank"
                                          id="podcastName" class="c-podcast-player__title c-podcast-player__title--is-name"
                >Alles auf Aktien</a>
                    <a href="https://www.welt.de/podcasts/alles-auf-aktien/" target="_blank"
                                              class="c-podcast-player__title">{ subtitle }</a>
            </div>
            <div id="podcastTitle" class="c-podcast-player__title c-podcast-player__title--is-episode-name">{ title }</div>
            <div id="podcastShownotes" style="display: none">{ show_notes }{ shownotes }</div>
        </div>
    </div>
    <div class="c-podcast-player__oembed podcast-oembed">
        <div class="c-podcast-player__player podcast-player">
            <audio></audio>

            <div class="c-podcast-player__main-player main-player">
                <div class="c-podcast-player__controls controls">
                <button class="c-podcast-player__play-button play-button" id="play-button">
                                        <svg style="display: block;" id="playbutton-svg-play" width="14" height="16" viewBox="0 0 14 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path fill-rule="evenodd" clip-rule="evenodd"
                                                  d="M13.6046 8C13.6046 7.49851 13.3659 6.99701 12.7931 6.63881L2.38677 0.262687C2.07649 0.0716418 1.79008 0 1.52753 0C0.692164 0 0 0.597015 0 1.55224V14.4478C0 15.403 0.692164 16 1.52753 16C1.79008 16 2.07649 15.9284 2.38677 15.7373L12.7931 9.36119C13.3659 9.00299 13.6046 8.50149 13.6046 8Z"
                                                  fill="white"/>
                                        </svg>
                                        <svg version="1.1" class="c-podcast-player__playbutton-svg-pause" id="playbutton-svg-pause"
                                             style="display:none;"
                                             xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"
                                             width="1000px" height="1000px" viewBox="0 0 1000 1000"
                                             enable-background="new 0 0 1000 1000" xml:space="preserve">
                                            <path d="M345,810c36,0,65-29,65-65V205c0-36-29-65-65-65h-90c-36,0-65,29-65,65v540c0,36,29,65,65,65H345z M745,810
                                            c36,0,65-29,65-65V205c0-36-29-65-65-65h-90c-36,0-65,29-65,65v540c0,36,29,65,65,65H745z M660,210h80v530h-80V210z M260,210h80v530
                                            h-80V210z"/>
                                        </svg>
                                    </button>
                        <progressbar/>
                </div>
            </div>
            <div class="c-podcast-player__line-horizontal"></div>
            <div class="c-podcast-player__additionals-container" id="additionals-container">
                <div class="panels c-podcast-player__additionals-panels"></div>
                <div class="c-podcast-player__line-horizontal"></div>
            </div>
            <div class="c-podcast-player__footer">
                <div class="c-podcast-player__footer-left">
                    <button class="c-podcast-player__additionals-toggle" id="additionals-toggle"><span class="is-mobile-hidden">Mehr&nbsp;</span>Episoden</button>
                        <a class="c-podcast-player__footer-text is-only-webview" href="https://www.welt.de/podcasts/alles-auf-aktien/" target="_blank">Episoden<span
                                class="c-podcast-player__footer-text-part">Alle&nbsp;</span></a>
                </div>
                <div class="c-podcast-player__footer-right">
                        <div class="c-podcast-player__social-icons">
                                <a class="c-podcast-player__social-link" href="https://open.spotify.com/show/2qiP4pYQXi8NMjHlCICmSq" target="_blank">
                                    <svg class="c-podcast-player__social-link-svg" xmlns="http://www.w3.org/2000/svg"
                                         width="24" height="24">
                                        <path fill="#FFF"
                                              d="M11.995 0C5.381 0 0 5.382 0 11.996 0 18.616 5.381 24 11.995 24 18.615 24 24 18.615 24 11.996 24 5.382 18.615 0 11.995 0zM5.908 16.404a14.547 14.547 0 014.238-.638c2.414 0 4.797.612 6.892 1.77.125.068.238.292.29.572.05.28.03.567-.052.716a.61.61 0 01-.834.24A13.106 13.106 0 006.277 18.03a.61.61 0 01-.771-.402c-.107-.35.114-1.13.402-1.224zm-.523-4.42a18.155 18.155 0 014.76-.635c2.894 0 5.767.7 8.31 2.026.179.09.31.244.37.432a.747.747 0 01-.052.578c-.227.444-.493.743-.66.743a.769.769 0 01-.35-.086 16.33 16.33 0 00-7.617-1.854c-1.498 0-2.967.197-4.366.585a.748.748 0 01-.92-.525c-.112-.422.145-1.16.525-1.264zM5.25 9.097a.88.88 0 01-1.073-.641c-.123-.498.188-1.076.64-1.19a22.365 22.365 0 015.328-.649c3.45 0 6.756.776 9.824 2.307a.888.888 0 01.4 1.19c-.143.288-.453.598-.795.598a.924.924 0 01-.388-.087 20.026 20.026 0 00-9.041-2.126c-1.635 0-3.282.201-4.895.598z"/>
                                    </svg>
                                </a>
                        </div>
                        <div class="c-podcast-player__social-icons">
                                <a class="c-podcast-player__social-link" href="https://www.deezer.com/us/show/2196062" target="_blank">
                                    <svg class="c-podcast-player__social-link-svg" xmlns="http://www.w3.org/2000/svg"
                                         width="24" height="15" viewBox="0 0 25 14">
                                        <path fill="#FFF"
                                              d="M0 12.454h4.551v1.351H0zm0-1.756h4.551v1.352H0zm0-1.757h4.551v1.352H0zm0-1.757h4.551v1.351H0zm0-1.757h4.551v1.351H0zm5.102 7.027h4.551v1.351H5.102zm0-1.756h4.551v1.352H5.102zm0-1.757h4.551v1.352H5.102zm5.103 3.513h4.551v1.351h-4.551zm0-1.756h4.551v1.352h-4.551zm0-1.757h4.551v1.352h-4.551zm0-1.757h4.551v1.351h-4.551zm0-1.757h4.551v1.351h-4.551zm0-1.757h4.551v1.351h-4.551zm0-1.757h4.551v1.352h-4.551zm5.102 10.541h4.551v1.351h-4.551zm0-1.756h4.551v1.352h-4.551zm0-1.757h4.551v1.352h-4.551zm0-1.757h4.551v1.351h-4.551zm0-1.757h4.551v1.351h-4.551zm5.103 7.027h4.551v1.351H20.41zm0-1.756h4.551v1.352H20.41zm0-1.757h4.551v1.351H20.41zm0-1.757h4.551v1.351H20.41zm0-1.757h4.551v1.352H20.41zm0-1.757h4.551v1.351H20.41zm0-1.757h4.551v1.351H20.41zm0-1.757h4.551v1.351H20.41z"/>
                                    </svg>
                                </a>
                        </div>
                        <div class="c-podcast-player__social-icons">
                                <a class="c-podcast-player__social-link" href="https://music.amazon.de/podcasts/df7f5b86-fe30-4754-bca8-ded5c7b904a3/Alles-auf-Aktien" target="_blank">
                                    <svg class="c-podcast-player__social-link-svg" xmlns="http://www.w3.org/2000/svg"
                                         width="24" height="24">
                                        <path fill="#FFF" fill-rule="evenodd"
                                              d="M10.066 23.788V21.42c0-.842-.516-1.592-1.297-1.923C5.844 18.256 3.797 15.352 3.797 12c0-4.468 3.637-8.14 8.14-8.14 4.505 0 8.141 3.672 8.141 8.14 0 5.272-4.078 10.257-10.012 11.788zM11.938.062C5.333.062 0 5.448 0 12c0 6.552 5.333 11.938 11.938 11.938S23.876 18.552 23.876 12c0-6.552-5.333-11.938-11.938-11.938z"/>
                                    </svg>
                                </a>
                        </div>
                        <div class="c-podcast-player__social-icons">
                                <a class="c-podcast-player__social-link" href="https://podcasts.apple.com/de/podcast/alles-auf-aktien/id1549709271" target="_blank">
                                    <svg class="c-podcast-player__social-link-svg" xmlns="http://www.w3.org/2000/svg"
                                         width="24" height="24" viewBox="0 0 25 24">
                                        <path fill="#FFF"
                                              d="M24.355 5.954a8.65 8.65 0 00-.243-2.13c-.321-1.27-1.077-2.245-2.21-2.957A5.195 5.195 0 0019.998.16a11.187 11.187 0 00-1.586-.147c-.041-.001-.085-.007-.126-.011H6.097l-.46.024c-.758.042-1.51.121-2.223.391C2.058.932 1.081 1.83.508 3.118c-.194.437-.296.9-.368 1.37a9.47 9.47 0 00-.102 1.148c0 .03-.008.06-.01.09v11.883c.009.137.016.274.026.412.05.792.156 1.579.504 2.306.66 1.38 1.761 2.288 3.278 2.724.428.123.868.182 1.311.222.562.05 1.126.06 1.69.06 3.727 0 7.454 0 11.182-.003.532 0 1.062-.032 1.591-.096.835-.102 1.619-.34 2.328-.787a4.96 4.96 0 001.905-2.147c.19-.41.297-.845.375-1.287.115-.656.14-1.32.14-1.984-.002-3.692 0-7.383-.003-11.075zm-6.512 3.88v5.552c0 .406-.058.804-.246 1.173-.293.575-.772.935-1.407 1.108a4.883 4.883 0 01-1.084.168c-.965.044-1.799-.583-1.971-1.493-.144-.75.231-1.578 1.053-1.964.328-.156.679-.243 1.033-.316.383-.08.768-.149 1.15-.233.277-.061.463-.224.517-.502a.913.913 0 00.018-.187V7.848a.7.7 0 00-.027-.18c-.04-.146-.15-.235-.308-.227a3.704 3.704 0 00-.481.064c-.771.146-1.54.296-2.31.445-.787.151-1.573.304-2.36.457l-1.393.27-.048.012c-.28.074-.383.198-.396.476v.127c-.001 2.53 0 5.06-.002 7.587 0 .41-.048.813-.219 1.193-.282.624-.78 1.012-1.454 1.2a4.66 4.66 0 01-1.09.167c-.972.035-1.778-.584-1.945-1.501-.144-.79.233-1.639 1.168-2.019.362-.145.742-.225 1.123-.302.291-.058.583-.111.873-.17.387-.082.59-.315.607-.695v-.147c0-2.877 0-5.756.002-8.633 0-.12.013-.243.042-.36.071-.277.277-.435.554-.504.258-.065.522-.11.784-.16.743-.145 1.486-.288 2.23-.431l2.303-.446c.678-.132 1.356-.265 2.036-.393.223-.042.45-.085.674-.103.314-.024.53.166.561.469.008.072.013.144.013.217v5.572z"/>
                                    </svg>
                                </a>
                        </div>
                        <div class="c-podcast-player__social-icons">
                                <a class="c-podcast-player__social-link" href="https://allesaufaktien.podigee.io" target="_blank">
                                    <svg fill="#fff"
                                         class="c-podcast-player__social-link-svg c-podcast-player__social-link-svg--is-svg-rss"
                                         viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M119.9,336.1c-30.8,0-55.9,25.1-55.9,55.8c0,30.8,25.1,55.6,55.9,55.6c30.9,0,55.9-24.9,55.9-55.6   C175.8,361.2,150.8,336.1,119.9,336.1z"/>
                                        <path d="M64,192v79.9c48,0,94.1,14.2,128,48.1c33.9,33.9,48,79.9,48,128h80C320,308.1,204,192,64,192z"/>
                                        <path d="M64,64v79.9c171,0,303.9,133,303.9,304.1H448C448,236.3,276,64,64,64z"/>
                                    </svg>
                                </a>
                        </div>
                        <a style="display: none" class="c-podcast-player__footer-text" href="https://www.welt.de/podcasts/alles-auf-aktien/" target="_blank">Episoden<span
                                class="c-podcast-player__footer-text-part">Alle&nbsp;</span></a>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    window.onload = function() {
        if (window.utag) {
            console.log("Podigee player will use provided utag");
        } else {
            window.utag_data = {
                page_type: "app",
                page_name: "Podigee-Standalone",
            };

            <!-- Loading script asynchronously -->
            (function(a,b,c,d){
                a='https://ast.welt.de/welt/prod/utag.js';
                b=document;c='script';d=b.createElement(c);d.src=a;d.type='text/java'+c;d.async=true;
                a=b.getElementsByTagName(c)[0];a.parentNode.insertBefore(d,a);
            })();

            const initTracking = () => {
                if (window.utag !== undefined ) {
                    console.log("Podigee player will use own utag");
                    window.utag.view();
                    podcastListenToOwnPostMessages();
                } else {
                    window.setTimeout(() => {
                        initTracking();
                    }, 200);
                }
            };

            initTracking();
        }
    };

    function podcastListenToOwnPostMessages() {
        window.addEventListener("message", (event) => {
            if (event.data.type === 'podcast' && event.origin === 'https://player.podigee-cdn.net') {
                podcastIframeTrackListener(event);
            }
        }, false);
    }

    function matchPodcastNameEpisode(strippedSrc) {
        const matchRegEx = /(episode|podcast)(?:_)([0-9]+)/g;
        let match;
        let idsFromUrl = {
            podcast: 'unknown-podcast-id',
            episode: 'unknown-episode-id'
        };

        while ((match = matchRegEx.exec(strippedSrc)) !== null) {
            const foundMatch = match[0].split('_');
            idsFromUrl = { ...idsFromUrl, ...{ [`${foundMatch[0]}`]: foundMatch[1] } };
        }

        return idsFromUrl;
    }

    function stripPodcastSrc(src = '') {
        return src.replace('https://cdn.podigee.com/media/', '').split('.opus?')[0];
    }

    function podcastIframeTrackListener(messageData) {
        const data = messageData.data;
        const simpleEvents = ['play', 'resume', 'eof', 'pause'];
        const strippedSrc = stripPodcastSrc(data.src);
        const idsFromUrl = matchPodcastNameEpisode(strippedSrc);

        const defaultTrackingData = {
            'event_name': 'audio',
            'event_action': data.event,
            'event_data': {
                'media_player': data && data.specialType ? 'podigee tts' : 'podigee player',
                'media_path': strippedSrc,
                'media_duration': Math.ceil(data.duration),
                'media_name': data.name,
                'media_title': data.title,
                'media_id': `${idsFromUrl.podcast}_${idsFromUrl.episode}`
            }
        };

        const isPositionValueEvent = simpleEvents.indexOf(data.event) === -1;
        const positionData = isPositionValueEvent ? { 'event_label': Math.ceil(data.value) } : {};
        const linkTrackingData = { ...defaultTrackingData, ...positionData };

        window.utag.link(linkTrackingData);
    }
</script>
<script>
    const additionalsToggle = document.getElementById('additionals-toggle');
    const additionalsContainer = document.getElementById('additionals-container');
    const shownotesText = document.getElementById('podcastShownotes').innerHTML;
    const activeClass = 'is-active';
    const audio = document.getElementsByTagName('audio')[0];
    let posInterval = null;
    const podcastName = document.getElementById('podcastName').textContent;
    const podcastTitle = document.getElementById('podcastTitle').textContent;
    let hasPodcastPlayedYet = false;

    const postMessageDefault = {
        type: 'podcast',
        name: podcastName,
        title: podcastTitle
    };

    window.setTimeout(() => {
        const hasEpisodeContent = additionalsContainer.querySelectorAll('.episode-description')[0].textContent.length > 0;
        const hasShownotesContent = shownotesText.length > 0;
        const hasPlaylist = additionalsContainer.querySelectorAll('.playlist').length > 0;
        const renderAdditionalsToggle = hasPlaylist;

        additionalsToggle.classList[renderAdditionalsToggle ? 'remove' : 'add']('is-hidden');
        additionalsContainer.classList[hasPlaylist ? 'add' : 'remove']('has-playlist');

        if (!renderAdditionalsToggle) {
            document.querySelectorAll('.c-podcast-player__footer-left .is-only-webview')[0].classList.remove('is-only-webview');
        }
    }, 500);

    const addEventsForPlaylistTracking = () => {
        const playerContainerForEpisodeClicks = document.querySelector('.c-podcast-player__player');
        const clickStuff = (e) => {
            if (audio) {

            }
            if (e.target.classList.contains('playlist-episode-title')) {
                window.parent.postMessage(
                        Object.assign(postMessageDefault,
                                {
                                    src: `${audio.src}`,
                                    duration: audio.duration,
                                    value: e.target.textContent,
                                    title: e.target.textContent,
                                    event: 'episodes:select'
                                }),
                        '*');
            }
            else if (e.target.classList.contains('load-more')) {
                window.parent.postMessage(
                        Object.assign(postMessageDefault,
                                {
                                    src: `${audio.src}`,
                                    duration: audio.duration,
                                    value: audio.currentTime,
                                    event: 'episodes:load_more'
                                }),
                        '*');
            }
        };

        playerContainerForEpisodeClicks.addEventListener('click', clickStuff);
    };

    additionalsToggle.addEventListener('click', () => {
        const isAdditionalsContainerOpen = additionalsContainer.classList.contains(activeClass);
        const playlistEpisodeItems = document.querySelectorAll('.playlist li');
        const podcastIdentifierTitle = document.getElementById('podcastTitle').textContent;

        additionalsContainer.classList[isAdditionalsContainerOpen ? 'remove' : 'add'](activeClass);
        additionalsToggle.classList[isAdditionalsContainerOpen ? 'remove' : 'add'](activeClass);

        addEventsForPlaylistTracking();

        if (playlistEpisodeItems.length) {
            playlistEpisodeItems.forEach((link) => {
                const linkText = link.querySelectorAll('.playlist-episode-title')[0].textContent;

                if (linkText === podcastIdentifierTitle) {
                    link.classList.add('active');
                } else {
                    link.classList.remove('active');
                }
            });
        }

        if (audio) {
            window.parent.postMessage(
                    Object.assign(postMessageDefault,
                            {
                                src: `${audio.src}`,
                                duration: audio.duration,
                                value: audio.currentTime,
                                event: isAdditionalsContainerOpen ? 'episodes:close' : 'episodes:open'
                            }),
                    '*');
        }
    });


            if (audio) {
                audio.addEventListener('playing', function() {
                    document.getElementById('playbutton-svg-pause').style.display = 'block';
                    document.getElementById('playbutton-svg-play').style.display = 'none';

                    window.parent.postMessage(
                        Object.assign(postMessageDefault,
                        {
                            src: `${audio.src}`,
                            duration: audio.duration,
                            event: (audio.currentTime > 0 && hasPodcastPlayedYet) > 0 ? 'resume' : 'play'
                        }),
                     '*');

                    if (!posInterval) {
                        posInterval = window.setInterval(function() {
                            window.parent.postMessage(
                                Object.assign(postMessageDefault,
                                {
                                    src: `${audio.src}`,
                                    duration: audio.duration,
                                    value: audio.currentTime,
                                    event: 'pos'
                                }),
                                '*');
                        }, 60000);
                    }
                    hasPodcastPlayedYet = true;
                });

                audio.addEventListener('pause', function() {
                    document.getElementById('playbutton-svg-play').style.display = 'block';
                    document.getElementById('playbutton-svg-pause').style.display = 'none';

                    window.parent.postMessage(
                        Object.assign(postMessageDefault,
                        {
                            src: `${audio.src}`,
                            duration: audio.duration,
                            value: audio.currentTime,
                            event: 'pause'
                        }),
                        '*');

                    if (posInterval) {
                        window.clearInterval(posInterval);
                        posInterval = null;
                    }
                });

                audio.addEventListener('ended', function() {
                    window.parent.postMessage(
                            Object.assign(postMessageDefault,
                                    {
                                        src: `${audio.src}`,
                                        duration: audio.duration,
                                        event: 'eof'
                                    }),
                            '*');

                    if (posInterval) {
                        window.clearInterval(posInterval);
                        posInterval = null;
                    }

                    const playlistItems = document.querySelectorAll('.playlist li');
                    const playlistItemsCount = playlistItems.length;

                    if (playlistItemsCount && playlistItemsCount > 1) {
                        let activeItemIdx = 0;

                        playlistItems.forEach(function(entry, i) {
                            entry.addEventListener('click', (e) => {
                                window.parent.postMessage(
                                    Object.assign(postMessageDefault,
                                            {
                                                src: `${audio.src}`,
                                                duration: audio.duration,
                                                value: audio.currentTime,
                                                event: e.isTrusted ? 'episodes:select' : 'episodes:next:autoplay'
                                            }),
                                    '*');
                            });
                            if (entry.classList.contains('active')) {
                                activeItemIdx = i;
                            }
                        });
                        let nextItem = activeItemIdx + 1;

                        if (nextItem > (playlistItemsCount - 1)) {
                            nextItem = 0;
                        }

                        playlistItems[nextItem].click();
                    }
                });
            }
</script>
<script>
    var won24WennframeResizerCfg = {
        "height": false,
        "margin": false,
        "overflow": false
    };
</script>
<script src="https://static.up.welt.de/iframe-resizer/iframe-resizer_v2.js"></script>

